{% extends "workspace/change_form.html" %}
{% load i18n  static admin_modify workspace_urls workspace_modify %}
{% block pretitle %}
{#    {% if selected_program  %}#}
        <h1><a href="{% url "workspace:workspaces_countryprogram_change" original.program.pk %}">{{ original.program }}</a></h1>
{#    {% endif %}#}
{% endblock %}
{% block content_title %}{% endblock %}

{% block content %}
    <div id="content-main">
        {% block object-tools %}
            {% if change and not is_popup %}
                <ul class="object-tools">
                    {% block object-tools-items %}
                        {% change_form_object_tools %}
                        {% include "admin_extra_buttons/includes/change_form_buttons.html" %}
                    {% endblock %}
                </ul>
            {% endif %}
        {% endblock %}
        <form {% if has_file_field %}enctype="multipart/form-data" {% endif %}{% if form_url %}action="{{ form_url }}" {% endif %}method="post"
              id="{{ opts.model_name }}_form" novalidate>{% csrf_token %}{% block form_top %}{% endblock %}
            <div>
                {% if is_popup %}<input type="hidden" name="{{ is_popup_var }}" value="1">{% endif %}
                {% if to_field %}<input type="hidden" name="{{ to_field_var }}" value="{{ to_field }}">{% endif %}
                {% if save_on_top %}{% block submit_buttons_top %}{% submit_row %}{% endblock %}{% endif %}
                {% if errors %}
                    <p class="errornote">
                        {% blocktranslate count counter=errors|length %}Please correct the error below.{% plural %}
                            Please correct the errors below.{% endblocktranslate %}
                    </p>
                    {{ adminform.form.non_field_errors }}
                {% endif %}

                {% block field_sets %}
                    <table>
                        <tr>
                            <th>Program</th>
                            <td>
                                <a href="{% url "workspace:workspaces_countryprogram_change" original.program.pk %}">{{ original.program }}</a>
                            </td>
                        </tr>

                        {% include "workspace/includes/flex_field_form.html" with  form=checker_form fields=original.flex_fields %}

                    </table>

                    {% for fieldset in adminform %}
                      {% include "workspace/includes/fieldset.html" with heading_level=2 prefix="fieldset" id_prefix=0 id_suffix=forloop.counter0 %}
                    {% endfor %}
                {% endblock %}

                {% block after_field_sets %}{% endblock %}

                {% block inline_field_sets %}
                    {% for inline_admin_formset in inline_admin_formsets %}
                        {% include inline_admin_formset.opts.template %}
                    {% endfor %}
                {% endblock %}

                {% block after_related_objects %}{% endblock %}

                {% block submit_buttons_bottom %}{% submit_row %}{% endblock %}

                {% block admin_change_form_document_ready %}
                    <script id="django-admin-form-add-constants"
                            src="{% static 'workspace/js/change_form.js' %}"
                            {% if adminform and add %}
                            data-model-name="{{ opts.model_name }}"
                            {% endif %}
                            async>
                    </script>
                {% endblock %}
                {% prepopulated_fields_js %}
            </div>
        </form>
    </div>
{% endblock %}
